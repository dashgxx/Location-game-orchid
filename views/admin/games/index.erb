<h1>MapAttack Game Editor</h1>

<style>
  table td {
    padding-left: 10px;
    padding-bottom: 5px;
  }
</style>

<% if @games.empty? %>
  No games yet!<br>
<% else %>
  <table>
    <tr>
      <th>Game Title</th>
      <th>Date</th>
      <th>Last pt.</th>
      <th>Status</th>
      <th>Players</th>
      <th>Points</th>
    </tr>
    <% @games.each do |game| %>
      <tr>
        <td><%= h game.name %><!--<a href="/game/<%= game.layer_id %>"></a>--></td>
        <td><%= h game.created_at.strftime('%D') %></td>
        <td><%= h game.players(:order => :updated_at).first.updated_at.strftime('%D') if game.players.length > 0 %></td>
        <% if game.is_active==0 %>
            <td>active</td>
        <% elsif game.is_active==-1 %>
            <td>waiting</td>
        <% elsif game.is_active==1 %>
            <td>ended</td>
        <% end %>

        <td><%= h game.players.count %></td>
        <td><%= h game.total_points %></td>
        <td><a href="/admin/games/<%= game.layer_id %>/edit">Setup</a></td>
        <td><a href="/admin/games/<%= game.layer_id %>/mapeditor">Edit Map</a></td>
        <td><a href="/game/<%= game.layer_id %>/dashboard">Dashboard</a></td>
        
        <td>&nbsp;&nbsp;&nbsp;<a href="/admin/games/<%= game.layer_id %>/reset" onclick="<%= onclick_put ' Are you -really- sure?' %>">Reset Game</a></td>
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/admin/games/<%= game.layer_id %>" onclick="<%= onclick_delete %>">Delete</a></td>
        <% if game.is_active==0 %>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/admin/games/<%= game.layer_id %>/end" >end</a></td>
        <% elsif game.is_active==-1 %>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/admin/games/<%= game.layer_id %>/start" >start</a></td>
        <% elsif game.is_active==1 %>

        <% end %>
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/admin/games/<%= game.layer_id %>/console" >console</a></td>
      </tr>
    <% end %>
  </table>
<% end %>
<br><br>

<a href="/admin/games/new">Create New Game</a>